(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"7nBI":function(u,h,e){u.exports=e.p+"static/noHistoryRecord.339636aa.svg"},Aw3qx:function(u,h,e){"use strict";var H=e("gSlT"),y=e("RtDM"),P=e("7nBI"),x=e.n(P),T=e("ikfJ"),O=e.n(T);h.a=function(A){var b=A.desc,B=A.height,M=B===void 0?180:B;return Object(T.jsx)(y.a,{image:x.a,imageStyle:{height:M},description:b||"\u6682\u65E0\u6570\u636E"})}},VQm2:function(u,h,e){"use strict";e.r(h);var H=e("vH/C"),y=e("8QJ5"),P=e("mldV"),x=e("/T/q"),T=e("mTNx"),O=e("Mfsa"),A=e("jpAf"),b=e("ISlP"),B=e("Cspb"),M=e("0rnx"),ot=e("gSlT"),Y=e("RtDM"),W=e("qxrl"),S=e("q5+0"),Q=e("9kvl"),J=e("k57u"),j=e.n(J),K=e("H6aG"),X=e.n(K),lt=e("QNz5"),z=e("ANeT"),G=e("T9Mk"),t=e("ikfJ"),V=function(o){var c=o.values,l=o.startDate,i=o.endDate;return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(X.a,{startDate:l,endDate:i,values:c,showWeekdayLabels:!0,tooltipDataAttrs:function(s){return s.date===null?null:{"data-tip":"".concat(s.date," \u64CD\u4F5C\u8BB0\u5F55: ").concat(s.count)}}}),Object(t.jsx)(z.a,{})]})},Z=e("yq+b"),N=e.n(Z),dt=e("Yspc"),$=e("Axpw"),w=e("9i4O"),ut=e("JZPQ"),U=e("PZPQ"),k=e("XLzb"),a=e.n(k),q=e("Dxrh"),_=e("Aw3qx"),tt={0:Object(t.jsx)("span",{className:a.a.operationType,children:"\u6DFB\u52A0\u4E86"}),1:Object(t.jsx)("span",{className:a.a.operationType,children:"\u66F4\u65B0\u4E86"}),2:Object(t.jsx)("span",{className:a.a.operationType,children:"\u5220\u9664\u4E86"}),3:Object(t.jsx)("span",{className:a.a.operationType,children:"\u6267\u884C\u4E86"}),4:Object(t.jsx)("span",{className:a.a.operationType,children:"\u7EC8\u6B62\u4E86"})},et=U.a.Panel,at=function(o){var c=o.userMap,l=o.userId,i=o.record,C=function(n){var f=n.title,g=f.split("&"),d=g.map(function(F){var D=F.split("="),r=Object(w.a)(D,2),R=r[0],I=r[1];return"".concat(R,": ").concat(I)}),L=d.join("\u3000");return Object(t.jsxs)("div",{children:[Object(t.jsx)(M.a,{src:c[l].avatar||"https://joeschmoe.io/api/v1/".concat(c[l].name||"unknown")}),Object(t.jsx)("span",{className:a.a.tag,children:Object(t.jsx)($.a,{color:"green",children:n.tag})}),Object(t.jsx)("span",{className:a.a.userName,children:c[n.user_id].name}),Object(t.jsx)("span",{children:tt[n.mode]}),Object(t.jsx)("span",{children:L})]})},s=function(n){return n===!0?"\u662F":n===!1?"\u5426":n},E=function(n,f){var g=JSON.parse(n.description);return Object(t.jsx)("div",{className:a.a.description,children:g.length>0?g.map(function(d){return d.old==null?Object(t.jsxs)("div",{className:a.a.desc,children:[Object(t.jsxs)("span",{className:a.a.field,children:[d.name,":"]}),Object(t.jsx)("strong",{className:a.a.newField,children:d.now})]},f):Object(t.jsxs)("div",{className:a.a.desc,children:[Object(t.jsx)("span",{className:a.a.field,children:d.name})," \u7531 ",Object(t.jsx)("del",{children:s(d.old)})," \u53D8\u66F4\u4E3A",Object(t.jsx)("strong",{className:a.a.newField,children:s(d.now)})]},f)}):"\u672A\u53D1\u751F\u53D8\u52A8"})};return i.length>0?Object(t.jsx)(q.Scrollbars,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,style:{width:"100%",height:300},children:Object(t.jsx)(U.a,{ghost:!0,children:i.map(function(v){return Object(t.jsx)(et,{header:Object(t.jsx)("span",{children:C(v)}),extra:v.operate_time,children:E(v)},v.id)})})}):Object(t.jsx)(_.a,{desc:"\u6CA1\u6709\u64CD\u4F5C\u8BB0\u5F55",height:160})},st=e("yQ8X"),nt=e.n(st),rt=e("X/+/"),ct=e("D087"),m=new Date,p=function(c,l){var i=new Date(c);return i.setDate(i.getDate()+l),i},it=function(c){var l=c.user,i=c.dispatch,C=Object(S.i)(),s=C.user_id,E=l.userMap,v=l.operationLog,n=l.activities,f=function(r){return r===void 0?Object(t.jsx)(Y.a,{description:"\u52AA\u529B\u52A0\u8F7D\u4E2D..."}):Object(t.jsx)(t.Fragment,{children:Object(t.jsxs)("div",{className:j.a.pageHeaderContent,children:[Object(t.jsx)("div",{className:j.a.avatar,children:Object(t.jsx)(M.a,{size:"large",src:r.avatar||"https://joeschmoe.io/api/v1/".concat(r.name)})}),Object(t.jsxs)("div",{className:j.a.content,children:[Object(t.jsx)("div",{className:j.a.contentTitle,children:r.name}),Object(t.jsxs)("div",{children:[r.email," ",r.nickname]}),Object(t.jsxs)("div",{className:j.a.lastLogin,children:[Object(t.jsx)("span",{children:"\u4E0A\u6B21\u767B\u5F55"})," ",r.last_login_at]})]})]})})},g=function(){i({type:"user/fetchUserActivities",payload:{start_time:N()(p(m,-365)).format("YYYY-MM-DD"),end_time:N()(p(m,1)).format("YYYY-MM-DD"),user_id:s}})},d=function(){i({type:"user/fetchUserRecord",payload:{user_id:s,start_time:N()(p(m,-30)).format("YYYY-MM-DD"),end_time:N()(p(m,1)).format("YYYY-MM-DD")}})},L=function(){i({type:"user/fetchUserList"})},F=function(r){if(r===void 0)return 0;var R=Date.parse(new Date),I=Date.parse(new Date(r.created_at));return Math.abs(parseInt((R-I)/1e3/3600/24))};return Object(G.useEffect)(function(){L(),g(),d()},[s]),Object(t.jsx)(W.b,{breadcrumb:null,title:!1,children:Object(t.jsxs)(x.a,{gutter:24,children:[Object(t.jsx)(O.a,{span:8,children:Object(t.jsxs)(y.a,{title:"\u7528\u6237\u8D44\u6599",className:j.a.userBody,children:[f(E[s]),Object(t.jsxs)(x.a,{gutter:16,className:j.a.statisticsCard,children:[Object(t.jsx)(O.a,{span:12,children:Object(t.jsx)(b.a,{title:"\u6CE8\u518C\u65F6\u95F4",valueStyle:{color:"#1890ff"},value:F(E[s]),prefix:Object(t.jsx)(rt.a,{}),suffix:"\u5929"})}),Object(t.jsx)(O.a,{span:12,children:Object(t.jsx)(b.a,{title:"\u53C2\u4E0E\u9879\u76EE",value:0,prefix:Object(t.jsx)(ct.a,{})})})]})]})}),Object(t.jsxs)(O.a,{span:16,children:[Object(t.jsx)(y.a,{title:"\u6700\u8FD11\u5E74\u64CD\u4F5C\u8BB0\u5F55\u7EDF\u8BA1",className:j.a.heatMap,children:Object(t.jsx)(x.a,{children:Object(t.jsx)(O.a,{span:24,children:n.length===0?Object(t.jsx)(Y.a,{description:"\u6682\u65E0\u6570\u636E",image:nt.a,imageStyle:{height:120}}):Object(t.jsx)(V,{startDate:p(m,-365),endDate:p(m,1),values:n})})})}),Object(t.jsx)(y.a,{title:"\u6700\u8FD130\u5929\u52A8\u6001",className:j.a.userRecord,children:Object(t.jsx)(x.a,{children:Object(t.jsx)(O.a,{span:24,children:Object(t.jsx)(at,{userMap:E,userId:s,record:v})})})})]})]})})},jt=h.default=Object(Q.b)(function(o){var c=o.user;return{user:c}})(it)},XLzb:function(u,h,e){u.exports={operationType:"operationType___icEKH",userName:"userName___27E_y",tag:"tag___1iCWH",desc:"desc___1Zpbu",description:"description___2uri4",field:"field___10e82",newField:"newField___2wUff"}},k57u:function(u,h,e){u.exports={userBody:"userBody___1pOfT",heatMap:"heatMap___FrAeY",userRecord:"userRecord___1nVgj",activitiesList:"activitiesList___3j8Qn",username:"username___1L1nx",event:"event___1m5SG",pageHeaderContent:"pageHeaderContent___3XtL-",avatar:"avatar___36xcI",content:"content___1hGrg",contentTitle:"contentTitle___joG5X",lastLogin:"lastLogin___2nEjU",statisticsCard:"statisticsCard___raDLL"}},yQ8X:function(u,h,e){u.exports=e.p+"static/no_record.851fa0dc.svg"}}]);
